{% extends 'back/baseback.html.twig' %}

{% block title %}Project Details - {{ project.titre }}{% endblock %}

{% block body %}
    <div class="container mt-4">
        <h1 class="text-center fw-bold mb-4">Project Details</h1>

        <div class="card shadow-lg p-4">
            <div class="row">
                <div class="col-md-8">
                    <h2 class="fw-bold">{{ project.titre }}</h2>

                    <!-- Displaying the project description without HTML tags -->
                    <p class="text-muted">{{ project.getDescriptionProject() | striptags }}</p>

                    <div class="mb-4">
                        <h5 class="fw-bold">Dates</h5>
                        <ul class="list-unstyled">
                            <li><strong>Creation Date :</strong> {{ project.getDateCreationProject() ? project.getDateCreationProject()|date('Y-m-d') : 'N/A' }}</li>
                            <li><strong>Deadline :</strong> {{ project.getDateLimite() ? project.getDateLimite()|date('Y-m-d') : 'N/A' }}</li>
                        </ul>
                    </div>

                    <!-- Displaying the difficulty level -->
<div class="mb-4">
    <h5 class="fw-bold">Difficulty Level</h5>
    <div style="width: 50px; height: 50px; display: flex; align-items: center; justify-content: center; 
                border-radius: 5px; color: white; font-weight: bold; 
                background-color: 
                    {% if project.difficulte == '1' %}  #81c784  {# Green #}
                    {% elseif project.difficulte == '2' %} #ffeb3b  {# Yellow #}
                    {% elseif project.difficulte == '3' %} #ffb74d  {# Orange #}
                    {% elseif project.difficulte == '4' %} #ff7043  {# Red #}
                    {% else %} #cccccc {# Default grey #}
                    {% endif %}">
        {{ project.difficulte }}
    </div>
</div>



                    <!-- Displaying the project PDF if it exists -->
{% if project.getFichierPdf() %}
    <div class="mb-4">
        <h5 class="fw-bold">Project PDF</h5>
        
        <!-- Button to download the PDF -->
        <a href="{{ asset('uploads/projet/' ~ project.getFichierPdf()) }}" download class="btn btn-info">
            <i class="fas fa-file-pdf"></i> Download PDF
        </a>

        <!-- Button to view the PDF -->
        <a href="{{ asset('uploads/projet/' ~ project.getFichierPdf()) }}" target="_blank" class="btn btn-secondary">
            <i class="fas fa-eye"></i> Check PDF
        </a>
    </div>
{% endif %}







                    <div class="mb-4">
                        <h5 class="fw-bold">Status</h5>
                        <span class="badge bg-{{ project.getDateLimite() and project.getDateLimite() < 'now' ? 'danger' : 'success' }}">
                            {{ project.getDateLimite() and project.getDateLimite() < 'now' ? 'Expired' : 'Active' }}
                        </span>
                    </div>
                </div>

                <div class="col-md-4">
                    <div class="text-center">
                        <!-- Displaying the project image -->
{% if project.getImage() %}
    <div class="mb-4">
        <h5 class="fw-bold">Project Image</h5>
    <img src="{{ project.getImage() ? asset('uploads/projet/' ~ project.getImage) : asset('images/default-image.jpg') }}" alt="Project Image" class="img-fluid" data-image="{{ project.getImage() ? 'yes' : 'no' }}">
    </div>
{% endif %}

                    </div>
                </div>
            </div>

            <div class="d-flex justify-content-between mt-4">
                <a href="{{ path('app_group_index') }}" class="btn btn-secondary btn-lg shadow-sm">
                    <i class="fas fa-arrow-left"></i> Back to Groups
                </a>
                <div>
                    <a href="{{ path('app_project_edit', {'id': project.id}) }}" class="btn btn-warning btn-lg shadow-sm">
                        <i class="fas fa-edit"></i> Edit
                    </a>
                    <form action="{{ path('app_project_delete', {'id': project.id}) }}" method="POST" style="display: inline;">
                        <input type="hidden" name="_token" value="{{ csrf_token('delete' ~ project.id) }}">
                        <button type="submit" class="btn btn-danger btn-lg shadow-sm" onclick="return confirm('Are you sure you want to delete this project?')">
                            <i class="fas fa-trash"></i> Delete
                        </button>
                    </form>
                </div>
            </div>
        </div>
    </div>
{% endblock %}
